<UserControl x:Class="PujcovnaApp.Views.VypujckyView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="1100">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="20"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="1" BorderBrush="#3498DB" BorderThickness="2" CornerRadius="5" Padding="15" Background="#F0F8FF">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <TextBlock Text="NOVÁ VÝPŮJČKA" FontWeight="Bold" Foreground="#3498DB" Grid.ColumnSpan="5" Margin="0,0,0,10" FontSize="16"/>

                <StackPanel Grid.Row="1" Grid.Column="0" Margin="5">
                    <TextBlock Text="Zákazník:" FontWeight="SemiBold"/>
                    <ComboBox ItemsSource="{Binding SeznamZakazniku}" 
                              SelectedItem="{Binding VybranyZakaznikCmb}"
                              DisplayMemberPath="Prijmeni" Height="30"/>
                </StackPanel>

                <StackPanel Grid.Row="1" Grid.Column="1" Margin="5">
                    <TextBlock Text="Dostupné nářadí:" FontWeight="SemiBold"/>
                    <ComboBox ItemsSource="{Binding DostupneNaradi}" 
                              SelectedItem="{Binding VybraneNaradiCmb}"
                              DisplayMemberPath="Nazev" Height="30"/>
                </StackPanel>

                <StackPanel Grid.Row="1" Grid.Column="2" Margin="5">
                    <TextBlock Text="Datum vypůjčení:" FontWeight="SemiBold"/>
                    <DatePicker SelectedDate="{Binding DatumVypujckyVyber}" Height="30"/>
                </StackPanel>

                <StackPanel Grid.Row="1" Grid.Column="3" Margin="5">
                    <TextBlock Text="Datum vrácení (plán):" FontWeight="SemiBold"/>
                    <DatePicker SelectedDate="{Binding DatumVraceniPlan}" Height="30"/>
                </StackPanel>

                <Button Grid.Row="1" Grid.Column="4" Content="Vypůjčit" 
                        Command="{Binding VypujcitCommand}" 
                        Height="40" Width="100" Margin="10,18,0,0" 
                        Background="#3498DB" Foreground="White" FontWeight="Bold" BorderThickness="0"/>
            </Grid>
        </Border>

        <TextBlock Grid.Row="3" Text="TABULKA VÝPŮJČEK" FontSize="20" FontWeight="Bold" Foreground="#2980B9" Margin="0,0,0,5" HorizontalAlignment="Center"/>

        <DataGrid Grid.Row="4" 
                  ItemsSource="{Binding SeznamVypujcek}" 
                  SelectedItem="{Binding VybranaVypujcka}"
                  AutoGenerateColumns="False" CanUserAddRows="False"
                  ColumnHeaderStyle="{StaticResource BlueHeaderStyle}"
                  BorderBrush="#3498DB" BorderThickness="2">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="40"/>
                <DataGridTextColumn Header="Zákazník" Binding="{Binding Zakaznik.Prijmeni}" Width="100"/>
                <DataGridTextColumn Header="Nářadí" Binding="{Binding Naradi.Nazev}" Width="150"/>
                <DataGridTextColumn Header="Datum výpůjčky" Binding="{Binding DatumVypujcky, StringFormat={}{0:dd.MM.yyyy}}" Width="110"/>
                <DataGridTextColumn Header="Datum vrácení (plán)" Binding="{Binding DatumVraceniPlan, StringFormat={}{0:dd.MM.yyyy}}" Width="140"/>
                <DataGridTextColumn Header="Datum vrácení (skutečně)" Binding="{Binding DatumVraceniSkutecne, StringFormat={}{0:dd.MM.yyyy}}" Width="160"/>
                <DataGridTextColumn Header="Cena" Binding="{Binding Cena, StringFormat={}{0:N0} Kč}" Width="80"/>
                <DataGridTextColumn Header="Penále" Binding="{Binding Penale, StringFormat={}{0:N0} Kč}" Width="80" FontWeight="Bold" Foreground="Red"/>
            </DataGrid.Columns>
        </DataGrid>

        <StackPanel Grid.Row="5" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,0">

            <TextBlock Text="Hledat:" VerticalAlignment="Center" Margin="0,0,5,0"/>
            <TextBox Text="{Binding HledanyText, UpdateSourceTrigger=PropertyChanged}" Width="150" Margin="0,5,5,5" VerticalContentAlignment="Center"/>
            <Button Content="Filtrovat" Command="{Binding FiltrovatCommand}" Width="100" Background="#DDD"/>

            <Border Width="20"/>

            <Button Content="Reset změn" Command="{Binding ResetCommand}" Width="100" Background="#FADBD8"/>

            <Border Width="30"/>

            <TextBlock Text="Skutečné vrácení:" VerticalAlignment="Center" Margin="0,0,5,0" FontWeight="SemiBold"/>
            <DatePicker SelectedDate="{Binding DatumVraceniSkutecneVyber}" Width="120" VerticalContentAlignment="Center"/>

            <Button Content="VRÁTIT VÝPŮJČKU (Ukončit)" 
                    Command="{Binding VratitCommand}" 
                    Background="#E74C3C" Foreground="White" FontWeight="Bold" Padding="15,5" Margin="5,0,0,0"/>
        </StackPanel>
    </Grid>
</UserControl>